<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Language description | sunset-docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Language description | sunset-docs ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="sunset-docs">
            sunset-docs
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="language-description">Language description</h1>

<p>This page describes the <strong>Sunset Language</strong>, a simplified programming language used for engineering calculations.</p>
<p>Features:</p>
<ul>
<li>Automatic handling of units</li>
<li>Reporting in Markdown with LaTeX mathematical formatting</li>
</ul>
<h2 id="comments">Comments</h2>
<p>Comments start with <code>//</code> and cause the remainder of a line to be ignored.</p>
<pre><code class="lang-sunset">// This is a comment, the contents of which is ignored by the interpreter/compiler.
x = 35 {mm}

y = 50 {N} // This is also a comment
</code></pre>
<p>The preferred style is to have all comments on new lines with a space between the <code>//</code> character and the beginning of the comment.</p>
<h2 id="units">Units</h2>
<p><strong>Units</strong> are physical units of measurement. The standard unit abbreviations can be used and are enclosed in square
brackets <code>{unit}</code>, such as:</p>
<ul>
<li><code>{m}</code> for metres</li>
<li><code>{mm}</code> for millimetres</li>
<li><code>{s}</code> for seconds</li>
<li><code>{MPa}</code> for megapascals</li>
</ul>
<p>Derived units are described using expressions containing the below operators. Standard order of operations applies.</p>
<ul>
<li><code>*</code>, <code>.</code> or ``(at least one space) for multiplication</li>
<li><code>/</code> for division</li>
<li><code>^</code> for exponents</li>
</ul>
<p>For example, <code>{mm^2}</code>, <code>{mm*mm}</code>, <code>{mm mm}</code>, <code>{mm.mm}</code> are all equivalent, but not equal to <code>{mmmm}</code>.</p>
<p>Units with different dimensions can be mixed using these operators. For example <code>{kN/m}</code> and <code>{kN m^-1}</code> are both
equivalent.</p>
<p>Parentheses can be used to group together operations. For example, <code>{kg m/s^2}</code> is not equivalent to <code>{kg (m/s)^2}</code>, as
the latter will resolve to <code>{kg m^2 / s^2}</code>.</p>
<h2 id="values">Values</h2>
<p><strong>Values</strong> are numbers that are optionally followed by a unit. The following are valid values:</p>
<pre><code class="lang-sunset">40          // This is a 'unitless' value
12 {mm}
35 {kN m}
345,850.598 {kPa}
</code></pre>
<p>A space is not required between the number and the unit, but is preferred.</p>
<pre><code class="lang-sunset">12 {mm}     // This is valid and preferred
35{kN m}    // This is also valid but not preferred
</code></pre>
<p>All commas are ignored when processing numbers, and <code>en</code> or <code>En</code> may be used to raise any number to the <code>n</code>th exponent.</p>
<pre><code class="lang-sunset">12e5       // Equal to 1,200,000
12e-2      // Equal to 0.12
14,32.12   // Equal to 1,432.12 as all commas are ignored.
</code></pre>
<h2 id="variables">Variables</h2>
<p>Variables are defined by assigning a variable or expression to a <strong>name</strong>. Names must start with a letter or underscore,
and can contain any combination of letters, numbers and
underscores.</p>
<pre><code class="lang-sunset">// Valid variable names
length = 35 {mm}
_duration = 2.5 {s}

// Invalid variable names
3length = 35 {mm}       // Starts with a number
my variable = 68 {s}    // Name contains a space
my@variable = 45 {kg}   // Name contains a non-alphanumeric character
</code></pre>
<h3 id="variable-metadata">Variable metadata</h3>
<p>Metadata describing variables can be provided in the lines following a variable by starting the line with one of the
below letters and a colon <code>:</code>. Each letter is for a specific piece of metadata.</p>
<ul>
<li><code>s:</code> for symbols used in reporting calculations in LaTeX format. E.g. <code>\phi M_{sx}</code> as the symbol <span class="math">\(\phi M_{sx}\)</span></li>
<li><code>d:</code> for a description of the variable. E.g. <code>The bending section capacity of the plate in the x axis.</code></li>
<li><code>r:</code> for a code reference of the variable. E.g. <code>AS4100 Cl. 4.3.2</code></li>
<li><code>l</code>: for a label to be used when the variable is included in a user interface. E.g. <code>Bending capacity</code></li>
</ul>
<p>For example, the above variable may be annotated with metadata as follows:</p>
<pre><code class="lang-sunset">bendingCapacity = 1500 {kNm}
    s: \phi M_{sx}
    d: The bending section capacity of the plate in the x axis.
    r: AS4100 Cl. 4.3.2
</code></pre>
<p>Tabs are recommended before the metadata descriptors for readability.</p>
<h4 id="symbol-shorthand">Symbol shorthand</h4>
<p>Angle brackets <code>&lt;symbol&gt;</code> may be used as shorthand for the definition of a symbol following the declaration of a
variable.</p>
<pre><code>// The following two definitions are equivalent, with the second using the symbol definition shorthand
width = 150 {mm}
    s: b
    d: The width of the plate.
    
width &lt;b&gt; = 150 {mm}
    d: The width of the plate.
</code></pre>
<p>If the symbol doesn't contain any spaces, it may be used as an alternative to the name in the following calculations.</p>
<pre><code class="lang-sunset">width &lt;b&gt; = 150 {mm}
    d: The width of the plate. 
    
thickness &lt;t&gt; = 10 {mm}
    d: The thickness of the plate.

// The following two expressions are equivalent
area &lt;A&gt; = b * t
area &lt;A&gt; = width * thickness
</code></pre>
<p>If a symbol can just be used as a name (i.e. it doesn't contain any invalid characters), it may be defined as a name by
starting the name with <code>@</code>.</p>
<pre><code class="lang-sunset">// Given a variable in which the name is not required:
width &lt;b&gt; = 150 {mm}

// Using just the symbol but starting with @ makes both the symbol and name equal
@b = 150 {mm}

// This cannot be used for any variable where the symbol cannot be later used as a name
// For example, for the following variable

bending_capacity &lt;\phi M&gt; = 0.9

// This cannot be defined as `@\phi M` as it is not a valid name for later calculations due to the space in the symbol
</code></pre>
<h4 id="description-shorthand">Description shorthand</h4>
<p>Double quotation marks <code>&quot;</code> may be used as shorthand for the description following the declaration of a variable.</p>
<p>The order of the description and the reference do not matter, however convention is for the reference to be placed
first.</p>
<pre><code class="lang-sunset">// The following two definitions are equivalent,
// with the second using the description definition shorthand

capacity_factor = 250 {MPa} &quot;The yield strength of steel.&quot;
    s: \phi
    r: AS4100 Cl. 2.5.4
</code></pre>
<h2 id="calculations">Calculations</h2>
<p>To perform calculations, simply use the following operators and functions to form expressions assigned to a variable.</p>
<ul>
<li><code>+</code> for addition</li>
<li><code>-</code> for subtraction</li>
<li><code>*</code> for multiplication</li>
<li><code>/</code> for division</li>
<li><code>^</code> for exponents</li>
<li><code>sqrt(x)</code> for square roots</li>
<li><code>sin(x)</code>, <code>cos(x)</code>, <code>tan(x)</code> for standard trigonometric functions.</li>
<li><code>asin(x)</code>, <code>acos(x)</code>, <code>atan(x)</code> for standard inverse trigonometric functions</li>
</ul>
<pre><code class="lang-sunset">// Variable definitions with values

width &lt;b&gt; = 150 {mm} 
    d: The width of the plate.

thickness &lt;t&gt; = 10 {mm}
    d: The thickness of the plate.

// Calculations are performed by assigning an expression to a variable

area &lt;A&gt; = width * thickness &quot;The cross sectional area of the plate.&quot;

// More variables may be defined with values after a calculation is performed

capacityFactor &lt;\phi&gt; = 0.9
yieldStrength &lt;f_y&gt; = 250 {MPa}

// Calculations may be performed based on the results of previous calculations

bendingCapacity &lt;\phi M_sx&gt; = capacity_Factor * f_y * A
d: The axial capacity of the section
r: AS4100 Cl. 4.5.3
</code></pre>
<h3 id="reassigning-units">Reassigning units</h3>
<p>Occasionally, units must be reassigned after the calculation. This tends to occur when empirical formulae are used. This
can be done by assigning units to a variable using <code>{unit}</code>, which converts the value back to a unitless number, then
using <code>{unit}</code> again to convert the result to the desired unit.</p>
<pre><code>compressiveStrength &lt;f^'_c&gt; = 32 {MPa}

# The following empirical formula will result in flexuralStrength being assigned the units {MPa^0.5} or {kg^0.5 / (m^0.5 s^1)}
flexuralStrength &lt;f^'_{ct.f}&gt; = 0.6 * sqrt(compressiveStrength)     # Results in 3.39 {kg^0.5 / (m^0.5 s^1)}
</code></pre>
<p>Instead, the compressive strength must be converted to a unitless value before the square root:</p>
<pre><code>compressiveStrengthUnitless = compressiveStrength {MPa}             # Results in 32 with no units

# Note that it is important to get the units right here, as the following would be an error:
compressiveStrengthUnitless = compressiveStrength {kPa}             # Results in 32,000 with no units

# To avoid confusion, we recommend that _unit is used for any variables that are converted to a unitless quantity
compressiveStrength_MPa = compressiveStrength {MPa}
</code></pre>
<p>Once this conversion is done, the flexural strength can be calculated in a unitless form then converted back to the
correct units:</p>
<pre><code>flexuralStrength_MPa = 0.6 * sqrt(compressiveStrength_MPa)          # Results in 3.39 with no units
flexuralStrength &lt;f^'_{ct.f}&gt; = flexuralStrength_MPa {MPa}          # Results in 3.39 {MPa}
</code></pre>
<p>This can be shortened to a single expression to avoid creating the additional <code>compressiveStrength_MPa</code> and
<code>flexuralStrength_MPa</code> variables.</p>
<pre><code>compressiveStrength &lt;f^'_c&gt; = 32 {MPa}
flexuralStrength &lt;f^'_{ct.f}&gt; = 0.6 * sqrt(compressiveStrength {MPa}) {MPa}
</code></pre>
<h2 id="reporting">Reporting</h2>
<p>Performing calculations will result in a report being generated in the format of choice. The most common format is
Markdown, which can be used to then output PDF reports.</p>
<h3 id="text">Text</h3>
<p>Comments with a single <code>#</code> are not included in the report. If <code>##</code> is used to start a comment, it is included in the
report. Standard Markdown can be used to style the comment.</p>
<h3 id="calculations-1">Calculations</h3>
<p>Variables are reported if a symbol is defined for that variable, but are not reported if a symbol is not defined. If a
reference is defined it will also be added to the report next to the calculation.</p>
<p>All variables with a description will be printed at the end of the calculation with their description.</p>
<pre><code>## #### Plate section modulus
# The two &quot;##&quot;s at the beginning of the comment above is used to signal that it will be included in the report.
# The &quot;#### &quot; following it means that a level 4 heading will be added as per standard Markdown.
# This line and the two lines above will not be included in the report as they begin with only a single #. 

## Calculate the **plastic** section modulus of the plate.
# The **plastic** is Markdown for &quot;make 'plastic' bold&quot;.

@b = 150 {mm}
    d: Width of the plate.
@t = 10 {mm}
    d: Thickness of the plate.
    
plasticDenominator = 4                      # This variable will not be reported as it does not have a symbol defined

@Z_p {Example reference} = b * t ^ 2 / plasticDenominator
    d: Plastic section modulus.
</code></pre>
<p>This will result in the following report:</p>
<blockquote>
<h4 id="calculation-of-the-plastic-section-modulus">Calculation of the plastic section modulus</h4>
<p>Calculate the plastic section modulus of the plate.</p>
<div class="math">
\[

&gt; \begin{alignedat}{2}
&gt; b &amp;= 150 \text{ mm} \\
&gt; d &amp;= 10 \text{ mm} \\
&gt; Z_p &amp;= 3,750 \text{ mm}^2 &amp;\quad\text{(Example reference)}
&gt; \end{alignedat}
&gt; $$

Where:

- $b$: Width of the plate.
- $d$: Thickness of the plate.
- $Z_p$: Plastic section modulus. (Example reference)
\]</div>
</blockquote>
<h2 id="types-of-variables">Types of variables</h2>
<p>A variable can take on any of the following types:</p>
<ul>
<li>Constants</li>
<li>Expressions</li>
<li>Elements</li>
<li>Conditionals</li>
<li>Lists</li>
<li>Dictionaries</li>
</ul>
<h3 id="constants">Constants</h3>
<p>A constant can be a single value or an expression that evaluates to a number of constants.</p>
<pre><code># Single value constant
YieldStrength &lt;f_y&gt; = 250 {MPa} &quot;The yield strength of steel.&quot;

# Expression containing multiple constants
Area &lt;A&gt; = 100 {mm} * 30 {mm} &quot;Cross-sectional area of plate.&quot;

# Expression that evaluates to a constant
AxialCapacity &lt;N&gt; = f_y * A &quot;Axial capacity of plate.&quot;
</code></pre>
<h3 id="expressions">Expressions</h3>
<p>Expressions are described in the section above on calculations.</p>
<h3 id="elements-as-variables-in-other-elements">Elements as variables in other elements</h3>
<p>Elements can also be used as variables in other elements.</p>
<p>If we wanted to calculate the elastic capacity of a section, we might define some elements as below:</p>
<pre><code>Section:
    inputs:
        Width &lt;w&gt; = 10 {mm}
        Depth &lt;d&gt; = 100 {mm}
    
    Area &lt;A&gt; = w * d
    @I_xx = w * d^3 / 12

IsotropicMaterial:
    inputs:
        YieldStrength &lt;f_y&gt; = 300 {MPa}
        Density &lt;\rho&gt; = 7800 {kg / m^3}
        
Beam:
    inputs:
        Section = Section()
        Material = IsotropicMaterial(YieldStrength: 250 {MPa}) 
    
    AxialCapacity &lt;N&gt; = Section.Area * Material.YieldStrength
    BendingCapacity &lt;M&gt; = Section.I_xx * Material.YieldStrength
    Weight &lt;w&gt; = Section.Area * Material.Density
</code></pre>
<p>Note that for elements used as variables, they do not need to define a symbol as there is no straightforward way of
printing them to the screen.</p>
<blockquote>
<p>[!NOTE] Consider whether they should be provided with a symbol or some kind of name for the purpose of reporting and
UI generation.</p>
</blockquote>
<p>The variables within an element can be accessed with the <code>.</code> modifier.</p>
<h1 id="roadmap">Roadmap</h1>
<h2 id="still-to-be-described">Still to be described</h2>
<ul>
<li>[x] Branching element behaviour</li>
<li>[x] Conditionals</li>
<li>[ ] Arrays and dictionaries</li>
<li>[ ] Collection functions</li>
<li>[ ] Options</li>
<li>[ ] Error handling</li>
<li>[ ] Comparisons</li>
</ul>
<h2 id="implementation">Implementation</h2>
<ul>
<li>[ ] Variables and expressions</li>
<li>[ ] Elements</li>
<li>[ ] Conditionals</li>
<li>[ ] Arrays</li>
<li>[ ] Collection functions</li>
<li>[ ] Dictionaries</li>
<li>[ ] Options</li>
</ul>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
